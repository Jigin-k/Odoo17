<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="sale_order_portal_content_return"
              name="Sales Order Portal Content"
              inherit_id="sale.sale_order_portal_content">
        <xpath expr="//div[@id='introduction']/div[@id='intro_row']"
               position="replace">
            <span id="return_modal" class="modal fade">
                <div class="modal-dialog modal-content" tabindex="-1"
                     role="dialog">
                    <div class="modal-header">
                        <h2 style="text-align:center; font-size 24px; font-weight:bold"
                            class="o_default_snippet_text">Sale Return
                        </h2>
                        <button type="button" class="btn-close"
                                data-bs-dismiss="modal"/>
                    </div>
                    <form action="/sale_return" method="post" class="modal-body"
                          id="o_website_form_result">
                        <div class="form-group row form-field o_website_form_custom o_website_form_required_custom">
                            <div class="col-6 d-block font-weight-bold">
                                Sale Order
                            </div>
                            <div class="col-6 d-block font-weight-bold">
                                Customer Name
                            </div>
                        </div>
                        <div class="row form-group">
                             <div class="col-6 align-middle">
                                <input type="text"
                                       style="color: #606060;box-shadow: none;padding-left: 0;font-size: 18px;border: 1px solid #aaa;box-sizing: border-box;text-align: center;"
                                       t-att-value="sale_order.name"
                                       name="order" readonly="1"
                                       class="form-control o_website_form_custom"/>
                                <input type="text"
                                       style="color: #606060;box-shadow: none;padding-left: 0;font-size: 18px;border: 1px solid #aaa;box-sizing: border-box;text-align: center;"
                                       t-att-value="sale_order.id"
                                       name="order_id"
                                       class="form-control o_website_form_custom d-none"/>
                            </div>
                            <div class="col-6 align-middle">
                                <input type="text" readonly="1"
                                       t-att-value="sale_order.partner_id.name"
                                       name="partner"
                                       class="form-control o_website_form_custom"
                                       style="color: #606060;box-shadow: none;padding-left: 0;font-size: 18px;border: 1px solid #aaa;box-sizing: border-box; text-align: center;"/>

                            </div>

                        </div>
                        <div class="row">
                            <br/>
                        </div>
                        <div class="form-group row ">
                            <div class="col-6 d-block font-weight-bold">
                                Select Product
                            </div>
                            <div class="col-6 d-block font-weight-bold">
                                Quantity
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-6 align-middle">
                                <select class="form-control product"
                                        id="product" name="product"
                                        default="None"
                                        style="color: #606060;box-shadow: none;padding-left: 0;font-size: 18px;border: 1px solid #aaa;box-sizing: border-box;text-align: center;">
                                    <option value="none">None</option>
                                    <t t-foreach="sale_order.order_line.mapped('product_id')"
                                       t-as="product">
                                        <option t-att-value='product.id'>
                                            <t t-esc="product.name"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="col-6 align-middle">
                                <input type="text"
                                       style="color: #606060;box-shadow: none;padding-left: 0;font-size: 18px;border: 1px solid #aaa;box-sizing: border-box; text-align: center;"
                                       value="0"
                                       name="qty"
                                       class="form-control o_website_form_custom"/>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-12 d-block font-weight-bold">
                                Reason
                            </div>

                            <div class="col-12">
                                <textarea rows="10" cols="45"
                                          id="return_reason"
                                          name="reason"
                                          placeholder="Explain your Reason"/>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-12">
                                <button id='submit' form="o_website_form_result" name="modal_submit"
                                        class="btn btn-secondary flex-grow-1 mb-1 d-none">
                                    Submit
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </span>
            <div class="row sale_return">
                <div class="col-6">
                    <h2 class="my-0">
                        <t t-esc="sale_order.type_name"/>
                        <em t-esc="sale_order.name"/>
                    </h2>
                </div>
                <div class="col-6">
                    <span class="btn-group flex-grow-1 mb-1 float-left">
                        <t t-if="sale_order.state in ('sent','sale') and sum(sale_order.order_line.mapped('qty_delivered')) > 0">
                            <a class="btn btn-secondary btn-block"
                               style="color: #FFFFFF;"
                               id="return_btn">
                                <i class="fa fa-truck">Return</i>
                            </a>
                        </t>
                    </span>
                </div>
            </div>
        </xpath>
    </template>

    <record id="return_redirect" model="website.page">
        <field name="name">Thanks (Return Order)</field>
        <field name="type">qweb</field>
        <field name="url">/return-thank-you</field>
        <field name="website_indexed" eval="False"/>
        <field name="is_published">True</field>
        <field name="key">return_thankyou</field>
        <field name="arch" type="xml">
            <t name="Thanks (Return Order)" t-name="return_thankyou">
                <t t-call="website.layout">
                    <div id="wrap" class="oe_structure oe_empty">
                        <section class="s_text_block pt40 pb40 o_colored_level "
                                 data-snippet="s_text_block">
                            <div class="container s_allow_columns">
                                <div class="row">
                                    <div class="col-lg-7 col-xl-6 me-lg-auto">
                                        <span class="d-block fa fa-4x fa-thumbs-up mx-auto rounded-circle bg-primary"/>
                                        <br/>
                                        <h1 class="text-center">Thank You!</h1>
                                        <div class="pb16 pt16 s_hr"
                                             data-snippet="s_hr"
                                             data-name="Separator">
                                            <hr class="mx-auto border-top w-50 border-dark text-center"/>
                                        </div>
                                        <h5 class="text-center">
                                            <span class="fa fa-check-circle"/>
                                            <span>Your Return Request Have Been Sent successfully
                                            </span>
                                        </h5>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </t>
            </t>
        </field>
    </record>

</odoo>
